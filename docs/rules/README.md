# CUDA Rules

## Contents
- [cuda_library](#cuda_library)

## cuda_library

This rule provides _CcInfo_ and _CudaInfo_ and is used for defining CUDA targets that can be used as dependency (_deps_ attribute) to other _cc__* and _cuda__* rules.

### Parameters

| Parameter            | Description                                                                                  |
|:---------------------|:---------------------------------------------------------------------------------------------|
| name                 | [Name](https://docs.bazel.build/versions/main/build-ref.html#name); required <br/> A unique name for this target. |
| srcs                 | List of [labels](https://docs.bazel.build/versions/main/skylark/lib/Label.html); optional <br/> The list of C/C++ and CUDA files that are processed to create the target. These are C/C++ and CUDA source and header files, either non-generated (normal source code) or generated. All .cc, .c, .cpp and .cu files will be compiled. These might be generated files: if a named file is in the outs of some other rule, this rule will automatically depend on that other rule. <br/> <br/> A header file will not be compiled, but will be available for inclusion by sources in this rule. Both source and header files can directly include headers listed in these srcs or in the hdrs of any rule listed in the deps argument. <br/> <br/> If a rule's name is in the srcs, then this rule automatically depends on that one. If the named rule's outs are C/C++ or CUDA source files, they are compiled into this rule; if they are library files, they are linked in. <br/> <br/> Permitted srcs file types: <ul><li>C/C++ and CUDA source files: .cu, .c, .cc, .cpp, .cxx, .c++, .C</li><li>C/C++ and CUDA header files: .h, .cuh, .hh, .hpp, .hxx, .inc, .inl, .H</li><li>Archive: .a, .lib</li><li>"Always link" library: .lo, .pic.lo</li><li>Shared library: .so, .dll, .dylib</li><li>Object file: .o, .pic.o</li> </ul> ...and any rules that produce those files. |
| deps                 | List of [labels](https://docs.bazel.build/versions/main/skylark/lib/Label.html); optional <br/> The list of other libraries to be linked in to the binary target. These can be cc_library or cuda_library targets. |
| hdrs                 | List of [labels](https://docs.bazel.build/versions/main/skylark/lib/Label.html); optional <br/> The list of header files published by this library to be directly included by sources in dependent rules. This is the strongly preferred location for declaring header files that describe the interface for the library. These headers will be made available for inclusion by sources in this rule or in dependent rules. Headers not meant to be included by a client of this library should be listed in the srcs attribute instead, even if they are included by a published header. |
| alwayslink           | Boolean; optional; default is False <br/> If True, any binary that depends (directly or indirectly) on this CUDA library will link in all the object files for the files listed in srcs, even if some contain no symbols referenced by the binary. This is useful if your code isn't explicitly called by code in the binary. |
| copts                | List of strings; optional <br/> Add these options to the host C++ compilation command. Subject to "Make variable" substitution. |
| dcopts               | List of strings; optional <br/> Add these options to the device CUDA compilation command. Subject to "Make variable" substitution. |
| defines              | List of strings; optional. <br/> List of defines to add to the compile line. Subject to "Make" variable substitution and Bourne shell tokenization. Each string, which must consist of a single Bourne shell token, is prepended with -D and added to the compile command line to this target, as well as to every rule that depends on it. Be very careful, since this may have far-reaching effects. When in doubt, add define values to local_defines instead. |
| include_prefix       | String; optional. <br/> The prefix to add to the paths of the headers of this rule. <br/> When set, the headers in the hdrs attribute of this rule are accessible at is the value of this attribute prepended to their repository-relative path. <br/><br/> The prefix in the strip_include_prefix attribute is removed before this prefix is added. |
| includes             | List of strings; optional <br/> List of include dirs to be added to the compile line. <br/> Subject to "Make variable" substitution. Each string is prepended with -isystem and added to COPTS. Unlike COPTS, these flags are added for this rule and every rule that depends on it. (Note: not the rules it depends upon!) Be very careful, since this may have far-reaching effects. When in doubt, add "-I" flags to COPTS instead. |
| linkopts             | List of strings; optional <br/> Add these flags to the host C++ linker command. Subject to "Make" variable substitution, Bourne shell tokenization and label expansion. Each string in this attribute is added to LINKOPTS before linking the binary target. <br/> Each element of this list that does not start with $ or - is assumed to be the label of a target in deps. The list of files generated by that target is appended to the linker options. An error is reported if the label is invalid, or is not declared in deps. |
| dlinkopts            | List of strings; optional <br/> Add these flags to the device CUDA linker command. Subject to "Make" variable substitution. |
| linkstatic           | Boolean; optional; default is False <br/> If linkstatic=True indicates that only static linking is allowed, so no .so will be produced. linkstatic=False does not prevent static libraries from being created. The attribute is meant to control the creation of dynamic libraries. |
| local_defines        | List of strings; optional <br/> List of defines to add to the compile line. Subject to "Make" variable substitution and Bourne shell tokenization. Each string, which must consist of a single Bourne shell token, is prepended with -D and added to the compile command line for this target, but not to its dependents. |
| strip_include_prefix | String; optional <br/> The prefix to strip from the paths of the headers of this rule. <br/> When set, the headers in the hdrs attribute of this rule are accessible at their path with this prefix cut off. <br/> <br/> If it's a relative path, it's taken as a package-relative one. If it's an absolute one, it's understood as a repository-relative path. <br/> <br/> The prefix in the include_prefix attribute is added after this prefix is stripped. |
| host_features        | List of strings; optional <br/> A list of feature to enable or disable on a target for host C++ compiler.  |
| gpu_arch             | String; optional. <br/> Specify the name of the class of NVIDIA virtual GPU architecture for which the CUDA input files must be compiled.  |
| gpu_codes            | List of strings; optional <br/> Specify the names of the NVIDIA GPU to assemble and optimize PTX for. |
| max_reg_count        | int; optional <br/> Specify the maximum amount of registers that GPU functions can use. |
